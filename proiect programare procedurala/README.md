# Proiect programare procedurala
## Functia generator 
primeste ca paramatrii de intrare un seed si si un numar de elemente n  si furnizeaza prin intermadiul parametrului v  elementele generate. S-a aplicat algoritmul lui George Marsaglia.
## Functia liniarizare 
primeste ca parametru numele fisierului BMP si furnizaeaza prin intermediul uniu parametru L imagina liniarizata. Fisierul BMP este deschis in modul rb si se testeaza daca fisierul s-a deschis cu succes. Se citesc latimea W (octetul 18) si inaltimea imaginii H (octetul 22) si se calculeaza dimensiunea unei linii in octeti (+ padding (4-(3*W)%4)%4). Se citeste din fisierul BMP fiecare „linie” , incepand cu linia H-1 pana la linia 0, deplasarea la inceputul fiecarei linii se face cu functia fseek(in,dim_linie*(H-i-1)+54,SEEK_SET).  La sfarsitul celor 3*W octeti cititi se sare peste padding.
## Functia reconstituire 
reface imaginea din forma sa liniarizata. Are ca parametrii antetul pozei in vectorul h pixelii din imagine in vactorul L si numele fisierului in care se rescrie imaginea. Fisierul BMP este deschis in modul „wb+” pentru a se citii inaltimea H si latimea W dupa ce se reface antetul. Din vector sunt accesate elementele de la prima linie din poza (care a fost memorata pe ultimile pozitii in vector) la ultima linie din poza (primele pozitii din vector). Primul element din linia i se afla pe pozitia W*(H-i-1), se citesc pe rand si urmatoarele elemente din linia i si se afiseaza in fisier, la sfarsitul liniei se afiseaza octetii de padding (octeti cu valoarea 0 ).
## Functia antet 
memoreaza in vecctorul header antetul pozei, numele pozei este transmis ca paramertu. Se citesc primii 54 de octeti si se memoreaza in h.
## Functia cripatre 
primeste ca parametrii numele pozei de criptat,numele pozei unde se memoreaza poza criptata si un fisier text din care vor fi citite cheia secresta si SV. Se apeleaza functia antet pentrua se memora antetul pozei de criptat, din acesta se citesc inaltimea si latimea octet cu octet cu o uniune cu 4 unsigned char.uri si un unsigned int. Se apeleaza functia liniarizare pentru a memora pixelii din imaginea de criptat. Se apeleaza functia generator  pentru a genera 2*inaltime*latime-1 numere. Prima jumatate dintre acestea se vor folosii pentru a genera permutarea aleatoare dupa algoritmul Durstenfeld aceasta se memoreaza in vectorul p. Pentru a permuta pixelii pozei se foloeste un vector auxiliar, dupa acesta pixelii sunt rescrsi in vectorul initial, se elibereaza memoria. Pentru partea a doua se xor.eaza separat primul pixel cu cheia secreta SV si cu primul element din a doua jumatate de numere aleatorii, dupa intr.un for se xor.eaza pixelul i cu pixlui i-1 si elementul corespunzator din vectorul r. La sfarsit se apeleaza functia reconstituire pentru a construi fisierul cu poza criptata.
## Functia decripatre 
primeste ca parametrii numele pozei criptate ,numele pozei unde se memoreaza poza decriptata si un fisier text din care vor fi citite cheia secresta si SV. Se apeleaza functia antet pentrua se memora antetul pozei, din acesta se citesc inaltimea si latimea octet cu octet cu o uniune cu 4 unsigned char.uri si un unsigned int. Se apeleaza functia liniarizare pentru a memora pixelii din imaginea criptata. Se apeleaza functia generator  pentru a genera 2*inaltime*latime-1 numere. Prima jumatate dintre acestea se vor folosii pentru a genera permutarea aleatoare dupa algoritmul Durstenfeld aceasta se memoreaza in vectorul p. Pentru ca algoritmul de criptare este complementar celui de decriptare se aplica asupra vectorului cu imaginea operatia de xor.are, de la ultimul catre primul pentru a avea acces la elementul i-1 in decriptaea elementului i. Pentru a depermuta pixelii pozei se foloeste un vector auxiliar, dupa acesta pixelii sunt rescrsi in vectorul initial, se elibereaza memoria. La sfarsit se apeleaza functia reconstituire pentru a construi fisierul cu poza initiala.
## Functia chi-patrat
primeste numele unei poza si calculeaza valorile chi-patrat pe fiecare canal de culoare. Acesta folosese 3 vectori de frecventa. In vectorul B se memoreaza intensitatile pe canalul albastru, in R pe rosu si in G pe verde. In fr se calculeazaa intensitatea medie. Pentru a calcula suma din formula se pacurge cu un for de la 0 la 255 toate intensitatile pe fiecare canal si se aplica formula.
## Functia fereastra 
primeste o fereastra care seidentifica prin coordonatele centului acesteia (int l, int c) , o culoare C, si o imgine care se identifica prin forma sa liniarizata si dimensiunile acesteia (W si H). Vectorul lin este cel care va memora modificarile. Pentru a se desena latimile chenarului se calculeaza linile din imagine pe care acestea ar fi ( x=l-7; y=l+7; ) si se parcurg cei 11 octeti ce trebuiesc modificati. Coloana din imagine la care se afla octetul de modificat i se calculeaza prin formula c-5+i. Im forma liniarizata octetul de pe linia x sau y si coloana c-5+i se afla pe pozitia x*W+c-5+i respectiv y*W+c-5+i. Pentru a desena lungimile chenarului se calucleaza coloanele pe care acesea ar fi ( x=c-5; y=c+5; ) si se parcurg cei 13 octeti de modificat (se coloreaza 13 octeti pentru a evita suprascrierea colturilor). Linia pe care se afla octetetul de modificat i se afla pe  linia l-5+i in imagine. In forma liniarizata octetul de pe linia l-5+i si coloana x sau y se afla pe pozitia (l-7+i)*W+x respectiv (l-7+i)*W+y.
## Functia corr 
primeste ca parametrii numele imaginii, numele sablonului, un prag de corelatie , un vector in care se memoreaza coordonatele centrelor ferestrelor ce depasesc pragul ps si alte date despre aceasta si cifra de pe sablonul cu care se coreleleaza. Se liniarizeaza imaginea si sablonul, se citesc lungimea si latimea imaginii din antet. Se parcurg pixelii din sablon si se face suma lor, pentru medie se imparte suma la 165. Pentru a calcula deviataia standard a sablonului se parcurg iar pixelii si se aplica formula. Pentru a testa daca care fereastra se potriveste cu sablonul se parcurg pixelii din imagine din vectorul linI. Elementul de pe pozitia i se afla in imagine pe linia i%a.x si coloana i/a.x  (a.x reprezinta lungimea imaginii). Se testeaza daca coordonatele acestea pot fii centrul unei imagini in caz afirmativ se calculeaza media intensitatilor pixelilor si deviatia standard a ferestei. Pentru a accesa pixelii din imagine se pleaca cu coordonatele coltului din stanga sus (x=l-7 si y=c-5) si se parcurge fereastra linie cu linie accesand pe rand elementle de pe fiecare coloana. Elementul de coordonate x,y se afla in vector pe pozitia x*lungime+y. Se parcurg pixelii si se calculeaza valoarea corelatiei dupa formula. Daca depaseste pragul ps, se realoca dimensiunea vectorulului unde se memoreaza datele despre fiecare fereastra si se adauga si aceasta.
## Functia grayscale 
primeste ca parametrii numele unei imagini si o transforma in nuante de gri prin formula x=0.299*R + 0.587*G + 0.114*B si salveza rezultatul intr-un alt fisier BMP.
## Functia comp 
este functia comparator pentru qsor si returneaza 1 daca a trebuie sa fie in dreapta lui b, -1 daca a trebuie sa fie in stanga lui b si 0 daca au valori egale.
## Functia suprapunere 
primeste doua ferestre din imagine, identificate prin coordonatele centrului returneaza 1 daca acestea se intersecteaza mai mult de 0.2 si 0 in caz contrar. Se calculeaza numarul de octeti care se intersecteaza pe coloana (daca diferenta dintre coordonate este mai mare de 11 insemna ca nu se intersecteaza, in caz ca diferenta e mai mica formula de calcul este c=12-abs(f1_c-f2_c)-1;). Pentru calculul numarului de octeti care se intersecteaza pe linie se foloseste formula l=16-abs(f1_l-f2_l); in caz ca nu se intersecteaza l=0. Suprafata pe care se intersecteaza este l*c din care impartim suprafata reuniunii. Se testeaza valoarea se suprapunere si se returneaza valoarea corespunzatoare.
## Functia eliminare 
primeste un vector de tip fereastra si numarul de elemente. Aceasta testeaza daca doua cate doua elemente se suprapun. In caz afirmativ se deplaseaza elemetele o pozitie la stanga pentru a elimina elementul de pe pozitia j (i<j reprezentand faptul ca corelatia ferestrei i este mai mare decat corelatia ferestrei j).
## in main se apelaeza functiile conform cerintelor.
